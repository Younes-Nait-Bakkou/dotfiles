---

- name: '{{ role_name }} | Checking for Distribution Config: {{ distribution }}'
  ansible.builtin.stat:
    path: '{{ role_path }}/tasks/{{ distribution }}.yml'
  register: distribution_config

- name: '{{ role_name }} | Run Tasks: {{ distribution }}'
  ansible.builtin.include_tasks: '{{ distribution }}.yml'
  when: distribution_config.stat.exists

- name: Clone Oh My Tmux Repo
  ansible.builtin.git:
    clone: true
    depth: 1
    dest: '{{ user_dir }}/.tmux'
    repo: https://github.com/gpakosz/.tmux.git
    single_branch: true
    update: true
    version: master
  register: clone

- name: Link .tmux.conf
  ansible.builtin.file:
    src: '{{ user_dir }}/.tmux/.tmux.conf'
    dest: '{{ user_dir }}/.tmux.conf'
    state: link
    force: true

- name: Link .tmux.conf.local
  ansible.builtin.file:
    src: '{{ role_path }}/files/.tmux.conf.local'
    dest: '{{ user_dir }}/.tmux.conf.local'
    state: link
    force: true
